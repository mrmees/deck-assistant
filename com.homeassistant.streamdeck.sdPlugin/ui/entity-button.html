<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Entity Button Settings</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Connection Setup Section -->
    <div id="connection-setup" class="section">
        <div class="section-title">Home Assistant Connection</div>

        <div class="field">
            <label for="ha-url">Home Assistant URL</label>
            <input type="text" id="ha-url" placeholder="http://192.168.1.254:8123">
        </div>

        <div class="field">
            <label for="ha-token">Access Token</label>
            <input type="password" id="ha-token" placeholder="Long-lived access token">
        </div>

        <div class="field">
            <button id="connect-btn" class="btn-primary">Connect</button>
        </div>

        <div id="connection-error" class="error-message"></div>

        <div class="help-text">
            <p><strong>How to get an access token:</strong></p>
            <ol>
                <li>Open Home Assistant</li>
                <li>Click your profile (bottom left)</li>
                <li>Scroll to "Long-Lived Access Tokens"</li>
                <li>Click "Create Token"</li>
                <li>Copy and paste the token above</li>
            </ol>
        </div>
    </div>

    <!-- Entity Setup Section -->
    <div id="entity-setup" class="section" style="display: none;">
        <div class="section-title">Entity Configuration</div>

        <div class="connection-status">
            <span id="status-indicator" class="status-dot connected"></span>
            <span id="status-text">Connected</span>
            <a href="#" id="edit-connection" class="edit-link">Edit Connection</a>
        </div>

        <div class="filters">
            <div class="field">
                <label for="search-filter">Search</label>
                <input type="text" id="search-filter" placeholder="Filter by name...">
            </div>

            <div class="field">
                <label for="area-filter">Area</label>
                <select id="area-filter">
                    <option value="">All Areas</option>
                </select>
            </div>

            <div class="field">
                <label for="domain-filter">Type</label>
                <select id="domain-filter">
                    <option value="">All Types</option>
                    <option value="light">Lights</option>
                    <option value="switch">Switches</option>
                    <option value="sensor">Sensors</option>
                    <option value="binary_sensor">Binary Sensors</option>
                    <option value="climate">Climate</option>
                    <option value="cover">Covers</option>
                    <option value="media_player">Media Players</option>
                    <option value="scene">Scenes</option>
                    <option value="script">Scripts</option>
                    <option value="lock">Locks</option>
                    <option value="fan">Fans</option>
                </select>
            </div>
        </div>

        <div class="field">
            <label for="entity-select">Entity <span id="entity-count" class="count-badge">(0)</span></label>
            <select id="entity-select">
                <option value="">Select an entity...</option>
            </select>
        </div>

        <div class="field">
            <label for="action-select">Action</label>
            <select id="action-select">
                <option value="toggle">Toggle</option>
                <option value="turn_on">Turn On</option>
                <option value="turn_off">Turn Off</option>
                <option value="none">No Action</option>
                <option value="call_service">Custom Service Call</option>
            </select>
        </div>

        <!-- Custom Service Call Section -->
        <div id="custom-service-section" class="subsection" style="display: none;">
            <div class="field">
                <label for="service-domain">Service Domain</label>
                <input type="text" id="service-domain" placeholder="light">
            </div>
            <div class="field">
                <label for="service-name">Service</label>
                <input type="text" id="service-name" placeholder="toggle">
            </div>
            <div class="field">
                <label for="service-data">Service Data (JSON)</label>
                <textarea id="service-data" rows="3" placeholder='{"brightness": 255}'></textarea>
            </div>
        </div>
    </div>

    <script src="js/entity-button-pi.js"></script>
</body>
</html>
